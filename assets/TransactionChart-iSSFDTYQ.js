import{r as f,j as e}from"./vendor_react-Djc1MftW.js";import{T as j}from"./Toggle-D8Ul_d3S.js";import{u as v}from"./index-CnEdeD3p.js";import{R as y,B as F,X as T,Y as b,T as w,L as C,b as m,C as D}from"./vendor_recharts-BHrHECup.js";import"./vendor_react_dom-_jcUkGts.js";import"./vendor_scheduler-BmyE5rk0.js";import"./vendor_papaparse-MRZiT6g1.js";import"./vendor__msgpack_msgpack-D6VyNCmu.js";import"./vendor_react_router-CAHG2pus.js";import"./vendor_web_vitals-Co-curaW.js";import"./vendor_clsx-B-dksMZM.js";import"./vendor_lodash-BVkvN6pE.js";import"./vendor_react_smooth-BLudc2bI.js";import"./vendor_prop_types-C8mTKnMW.js";import"./vendor_fast_equals-C7I1S-bJ.js";import"./vendor_tiny_invariant-BaFNuDhB.js";import"./vendor_d3_shape-BEeVWgsp.js";import"./vendor_d3_path-CimkQT29.js";import"./vendor_victory_vendor-kkW58D1l.js";import"./vendor_d3_scale-Boo5rDhd.js";import"./vendor_internmap-BkD7Hj8s.js";import"./vendor_d3_array-g_qRI3rN.js";import"./vendor_d3_time_format-9CwFdMGF.js";import"./vendor_d3_time-BXrU3AQC.js";import"./vendor_d3_interpolate-CKrgWNb4.js";import"./vendor_d3_color-9lF95FHy.js";import"./vendor_d3_format-CzD4bSOQ.js";import"./vendor_recharts_scale-Dc1GUyjq.js";import"./vendor_decimal_js_light-ZKFLnszB.js";import"./vendor_eventemitter3-uOVCADGG.js";const K={ene:0,feb:1,mar:2,abr:3,may:4,jun:5,jul:6,ago:7,sept:8,oct:9,nov:10,dic:11},at=({transactions:l})=>{const{t:r}=v(),[n,h]=f.useState(!0),u=l.reduce((t,o)=>{const a=new Date(o.date),i=`${a.getFullYear()}-${a.getMonth()+1}`,s=a.toLocaleString("default",{month:"short",year:"numeric"});return t[i]||(t[i]={month:s,revenue:0,expenditure:0}),o.category!==r("categories.internal")&&(o.amount>0?t[i].revenue+=o.amount:t[i].expenditure+=Math.abs(o.amount)),t},{}),p=Object.values(u).map(t=>({month:t.month,revenue:parseFloat(t.revenue.toFixed(2)),expenditure:parseFloat(t.expenditure.toFixed(2)),profit:parseFloat((t.revenue-t.expenditure).toFixed(2))})).sort((t,o)=>{const a=c=>{const[d,x]=c.split(" "),g=K[d.toLowerCase()];return new Date(Number(x),g)},i=a(t.month),s=a(o.month);return i.getTime()-s.getTime()});return e.jsxs("div",{children:[e.jsx(j,{className:"chart-controls",label:r("chart.toggle.show"),onToggle:h,textOn:r("chart.toggle.separate"),textOff:r("chart.toggle.total")}),e.jsx("div",{style:{width:"100%",height:300},children:e.jsx(y,{children:e.jsxs(F,{data:p,children:[e.jsx(T,{dataKey:"month"}),e.jsx(b,{tickFormatter:t=>`${t.toFixed(2)}€`,width:100}),e.jsx(w,{formatter:t=>`${t.toFixed(2)}€`}),n&&e.jsx(C,{}),n&&e.jsx(m,{dataKey:"revenue",fill:"#4caf50",name:r("chart.toggle.positive")}),n&&e.jsx(m,{dataKey:"expenditure",fill:"#f44336",name:r("chart.toggle.negative")}),!n&&e.jsx(m,{dataKey:"profit",fill:"#000000",name:"t('chart.toggle.total')",children:p.map((t,o)=>e.jsx(D,{fill:t.profit>=0?"#4caf50":"#f44336"},`cell-${o}`))})]})})})]})};export{at as default};
