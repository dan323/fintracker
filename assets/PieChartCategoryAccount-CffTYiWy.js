import{r as g,j as t}from"./vendor_react-Djc1MftW.js";import{T as P}from"./Toggle-hUYYeavO.js";import{c as T,u as M}from"./index-DbACWYKZ.js";import{f as l,i as $,p as R,s as k}from"./categories-D8CrvOJ-.js";import{P as y,a as f,C,L as x,T as v}from"./vendor_recharts-BHrHECup.js";import"./vendor_react_dom-_jcUkGts.js";import"./vendor_scheduler-BmyE5rk0.js";import"./vendor_papaparse-MRZiT6g1.js";import"./vendor__msgpack_msgpack-D6VyNCmu.js";import"./vendor_react_router-CAHG2pus.js";import"./vendor_web_vitals-Co-curaW.js";import"./vendor_clsx-B-dksMZM.js";import"./vendor_lodash-BVkvN6pE.js";import"./vendor_react_smooth-BLudc2bI.js";import"./vendor_prop_types-C8mTKnMW.js";import"./vendor_fast_equals-C7I1S-bJ.js";import"./vendor_tiny_invariant-BaFNuDhB.js";import"./vendor_d3_shape-BEeVWgsp.js";import"./vendor_d3_path-CimkQT29.js";import"./vendor_victory_vendor-kkW58D1l.js";import"./vendor_d3_scale-Boo5rDhd.js";import"./vendor_internmap-BkD7Hj8s.js";import"./vendor_d3_array-g_qRI3rN.js";import"./vendor_d3_time_format-9CwFdMGF.js";import"./vendor_d3_time-BXrU3AQC.js";import"./vendor_d3_interpolate-CKrgWNb4.js";import"./vendor_d3_color-9lF95FHy.js";import"./vendor_d3_format-CzD4bSOQ.js";import"./vendor_recharts_scale-Dc1GUyjq.js";import"./vendor_decimal_js_light-ZKFLnszB.js";import"./vendor_eventemitter3-uOVCADGG.js";const E={"Food and Dining":{r:255,g:112,b:67},Groceries:{r:244,g:81,b:30},"Meat Products":{r:229,g:57,b:53},Seafood:{r:255,g:193,b:7},"Vegan Options":{r:103,g:58,b:183},"Other Groceries (Processed)":{r:33,g:150,b:243},"Dining Out":{r:3,g:169,b:244},"Delivery Services":{r:0,g:188,b:212},Transport:{r:41,g:182,b:246},"Public Transport":{r:0,g:191,b:165},"Private Vehicle Fuel":{r:0,g:150,b:136},Gasoline:{r:255,g:202,b:40},Diesel:{r:255,g:183,b:77},Electric:{r:124,g:179,b:66},"Air Travel":{r:0,g:121,b:107},"Domestic Flights":{r:76,g:175,b:80},"International Flights":{r:139,g:195,b:74},Taxi:{r:183,g:28,b:28},"Rider Services":{r:230,g:81,b:0},"Housing and Utilities":{r:102,g:187,b:106},Electricity:{r:255,g:235,b:59},"Electricity (Renewable)":{r:253,g:216,b:53},"Electricity (Coal-Based)":{r:255,g:152,b:0},"Water Usage":{r:3,g:155,b:229},Heating:{r:30,g:136,b:229},"Heating (Natural Gas)":{r:38,g:198,b:218},"Heating (Electric)":{r:0,g:188,b:212},"Rent/Mortgage":{r:121,g:85,b:72},"Internet/Phone":{r:224,g:224,b:224},"Comunidad de vecinos":{r:96,g:125,b:139},"Cleaning Service":{r:158,g:158,b:158},"Fix/Maintenance":{r:33,g:33,b:33},"Cloud Services and Subscriptions":{r:100,g:255,b:218},Shopping:{r:171,g:71,b:188},Clothing:{r:126,g:87,b:194},"Clothing (Fast Fashion)":{r:224,g:64,b:251},"Clothing (Sustainable Brands)":{r:186,g:104,b:200},Electronics:{r:0,g:150,b:136},"Furniture (Wooden)":{r:121,g:85,b:72},"Furniture (Metal)":{r:158,g:158,b:158},"Personal Care":{r:255,g:138,b:128},Gifts:{r:213,g:0,b:249},"House Utils":{r:156,g:204,b:101},"Entertainment and Recreation":{r:255,g:167,b:38},"Streaming Services":{r:239,g:108,b:0},"Movies and Events":{r:255,g:138,b:101},"Outdoor Activities":{r:255,g:238,b:88},"Travel and Tourism (Hotels)":{r:102,g:187,b:106},"Gym Membership":{r:76,g:175,b:80},"Video Games":{r:255,g:87,b:34},"Physical Games":{r:156,g:39,b:176},Healthcare:{r:183,g:28,b:28},Medication:{r:239,g:83,b:80},"Health Services":{r:255,g:82,b:82},Supplements:{r:244,g:143,b:177},Education:{r:30,g:136,b:229},Books:{r:255,g:193,b:7},"Books (Physical)":{r:255,g:214,b:10},"Books (Digital)":{r:255,g:235,b:59},"Online Courses":{r:255,g:238,b:88},"School Supplies":{r:255,g:249,b:196},Miscellaneous:{r:156,g:39,b:176},Donations:{r:186,g:104,b:200},"Pet Care":{r:224,g:64,b:251},Hobbies:{r:126,g:87,b:194},Others:{r:103,g:58,b:183},Internal:{r:72,g:39,b:128},Lawyer:{r:56,g:14,b:95},"Taxes/Fees":{r:139,g:195,b:74},"Income Tax":{r:174,g:213,b:129},"Property Tax":{r:124,g:179,b:66},"Customs Duties":{r:192,g:202,b:51},"Currency Exchange Fees":{r:156,g:204,b:101},"Salary and Wages":{r:0,g:191,b:165},"Full-Time Job":{r:0,g:131,b:143},"Part-Time Job":{r:0,g:188,b:212},"Overtime and Bonuses":{r:29,g:233,b:182},Investments:{r:96,g:125,b:139},"Stocks and Bonds":{r:69,g:90,b:100},Dividends:{r:38,g:50,b:56},"Capital Gains":{r:144,g:164,b:174},"Real Estate":{r:66,g:66,b:66},"Rental Income":{r:33,g:33,b:33},"Sale of Property":{r:158,g:158,b:158},Cryptocurrency:{r:255,g:87,b:34},Trading:{r:239,g:83,b:80},Staking:{r:255,g:138,b:101},"Business Income":{r:255,g:167,b:38},"Self-Employed Services":{r:255,g:183,b:77},Freelancing:{r:255,g:204,b:128},"Small Business Profits":{r:255,g:224,b:178},"Government Benefits":{r:129,g:212,b:250},"Unemployment Benefits":{r:79,g:195,b:247},"Social Security":{r:41,g:182,b:246},"Disability Allowance":{r:3,g:169,b:244},"Pension and Retirement Funds":{r:121,g:85,b:72},"Private Pension":{r:78,g:52,b:46},"Employer Retirement Plan":{r:141,g:110,b:99},"Side Hustles":{r:38,g:166,b:154},"Gig Economy":{r:0,g:131,b:143},"Online Stores":{r:0,g:172,b:193},"Content Creation":{r:0,g:188,b:212},"Royalties and Licenses":{r:255,g:61,b:0},"Book Royalties":{r:244,g:67,b:54},"Music Royalties":{r:229,g:57,b:53},"Software Licenses":{r:255,g:87,b:34},"Gifts and Inheritances":{r:103,g:58,b:183},"Monetary Gifts":{r:63,g:81,b:181},Inheritances:{r:48,g:63,b:159},"Miscellaneous Income":{r:255,g:214,b:0},"Lottery Winnings":{r:255,g:235,b:59},"Cashbacks and Rewards":{r:253,g:216,b:53},"Alimony or Child Support":{r:255,g:238,b:88}},B=n=>`rgb(${Math.min(n.r,255)},${Math.min(n.g,255)},${Math.min(n.b,255)})`,S=n=>{const i=T[l(n).id];return B(E[i.name])},ce=({transactions:n})=>{const{t:i}=M(),[c,j]=g.useState(!0),[a,b]=g.useState(null),m=e=>{const{payload:r}=e;return t.jsx("div",{className:"recharts-default-legend",children:r==null?void 0:r.map((s,F)=>t.jsxs("div",{className:"recharts-legend-item",style:{display:"flex",alignItems:"center"},children:[t.jsx("div",{style:{width:10,height:10,backgroundColor:s.color,marginRight:5,borderRadius:"50%"}}),t.jsx("span",{children:s.value})]},`item-${F}`))})},d=g.useMemo(()=>a?n.filter(e=>$(l(e.category),l(a))):n,[n,a]),u=g.useMemo(()=>d.reduce((e,r)=>{const s=c?a?r.category:R(l(r.category)).name:r.account;return s&&(e[s]||(e[s]={pos:0,neg:0}),r.category!==i("categories.internal")&&(r.amount>0?e[s].pos+=r.amount:e[s].neg-=r.amount)),e},{}),[d,a,c]),o=g.useMemo(()=>Object.entries(u).map(([e,r])=>({name:e,pos:parseFloat(r.pos.toFixed(2)),neg:parseFloat(r.neg.toFixed(2))})),[u]),p=g.useMemo(()=>o.reduce((e,r)=>(e.pos+=r.pos,e.neg+=r.neg,e),{pos:0,neg:0}),[o]),h=e=>{if(a)return;const r=l(e.name);r&&k(r).length>0&&b(e.name)};return t.jsxs("div",{className:"analytics-container",children:[a&&t.jsx("button",{className:"back-to-categories-btn",onClick:()=>b(null),children:i("button.label.backToAllCategories")}),t.jsx(P,{className:"analytics-toggle",label:i("chart.toggle.group"),onToggle:e=>j(e),textOff:i("chart.toggle.account"),textOn:i("chart.toggle.categories")}),t.jsxs("div",{className:"pie-charts",children:[t.jsxs("div",{className:"chart",children:[t.jsx("h3",{children:a?`${a} (${i("chart.toggle.positive")})`:`${i("chart.toggle.positive")} ${c?"("+i("categories.main")+")":""}`}),t.jsxs(y,{width:400,height:700,children:[t.jsx(f,{data:o.filter(e=>e.pos>0).map(e=>({name:e.name,value:e.pos})),dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:150,fill:"#8884d8",onClick:e=>h(e),labelLine:!1,children:o.map((e,r)=>t.jsx(C,{fill:S(e.name)},`cell-${r}`))}),t.jsx(x,{content:e=>m(e)}),t.jsx(v,{formatter:e=>`${e}€: ${(e*100/p.pos).toFixed(2)}%`})]})]}),t.jsxs("div",{className:"chart",children:[t.jsx("h3",{children:a?`${a} (${i("chart.toggle.negative")})`:`${i("chart.toggle.negative")} ${c?"("+i("categories.main")+")":""}`}),t.jsxs(y,{width:400,height:700,children:[t.jsx(f,{data:o.filter(e=>e.neg>0).map(e=>({name:e.name,value:e.neg})),dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:150,fill:"#82ca9d",onClick:e=>h(e),labelLine:!1,children:o.map((e,r)=>t.jsx(C,{fill:S(e.name)},`cell-${r}`))}),t.jsx(x,{content:e=>m(e)}),t.jsx(v,{formatter:e=>`${e}€: ${(e*100/p.neg).toFixed(2)}%`})]})]})]})]})};export{ce as default};
