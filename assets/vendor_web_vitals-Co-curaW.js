var A,q=-1,p=function(t){addEventListener("pageshow",function(e){e.persisted&&(q=e.timeStamp,t(e))},!0)},L=function(){var t=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},T=function(){var t=L();return t&&t.activationStart||0},d=function(t,e){var n=L(),i="navigate";return q>=0?i="back-forward-cache":n&&(document.prerendering||T()>0?i="prerender":document.wasDiscarded?i="restore":n.type&&(i=n.type.replace(/_/g,"-"))),{name:t,value:e===void 0?-1:e,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:i}},m=function(t,e,n){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var i=new PerformanceObserver(function(r){Promise.resolve().then(function(){e(r.getEntries())})});return i.observe(Object.assign({type:t,buffered:!0},n||{})),i}}catch{}},l=function(t,e,n,i){var r,o;return function(u){e.value>=0&&(u||i)&&((o=e.value-(r||0))||r===void 0)&&(r=e.value,e.delta=o,e.rating=function(c,a){return c>a[1]?"poor":c>a[0]?"needs-improvement":"good"}(e.value,n),t(e))}},I=function(t){requestAnimationFrame(function(){return requestAnimationFrame(function(){return t()})})},E=function(t){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&t()})},P=function(t){var e=!1;return function(){e||(t(),e=!0)}},v=-1,w=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},y=function(t){document.visibilityState==="hidden"&&v>-1&&(v=t.type==="visibilitychange"?t.timeStamp:0,G())},M=function(){addEventListener("visibilitychange",y,!0),addEventListener("prerenderingchange",y,!0)},G=function(){removeEventListener("visibilitychange",y,!0),removeEventListener("prerenderingchange",y,!0)},H=function(){return v<0&&(v=w(),M(),p(function(){setTimeout(function(){v=w(),M()},0)})),{get firstHiddenTime(){return v}}},C=function(t){document.prerendering?addEventListener("prerenderingchange",function(){return t()},!0):t()},k=[1800,3e3],J=function(t,e){e=e||{},C(function(){var n,i=H(),r=d("FCP"),o=m("paint",function(u){u.forEach(function(c){c.name==="first-contentful-paint"&&(o.disconnect(),c.startTime<i.firstHiddenTime&&(r.value=Math.max(c.startTime-T(),0),r.entries.push(c),n(!0)))})});o&&(n=l(t,r,k,e.reportAllChanges),p(function(u){r=d("FCP"),n=l(t,r,k,e.reportAllChanges),I(function(){r.value=performance.now()-u.timeStamp,n(!0)})}))})},F=[.1,.25],Y=function(t,e){e=e||{},J(P(function(){var n,i=d("CLS",0),r=0,o=[],u=function(a){a.forEach(function(f){if(!f.hadRecentInput){var _=o[0],z=o[o.length-1];r&&f.startTime-z.startTime<1e3&&f.startTime-_.startTime<5e3?(r+=f.value,o.push(f)):(r=f.value,o=[f])}}),r>i.value&&(i.value=r,i.entries=o,n())},c=m("layout-shift",u);c&&(n=l(t,i,F,e.reportAllChanges),E(function(){u(c.takeRecords()),n(!0)}),p(function(){r=0,i=d("CLS",0),n=l(t,i,F,e.reportAllChanges),I(function(){return n()})}),setTimeout(n,0))}))},O=0,b=1/0,h=0,K=function(t){t.forEach(function(e){e.interactionId&&(b=Math.min(b,e.interactionId),h=Math.max(h,e.interactionId),O=h?(h-b)/7+1:0)})},D=function(){return A?O:performance.interactionCount||0},Q=function(){"interactionCount"in performance||A||(A=m("event",K,{type:"event",buffered:!0,durationThreshold:0}))},s=[],g=new Map,N=0,U=function(){var t=Math.min(s.length-1,Math.floor((D()-N)/50));return s[t]},V=[],W=function(t){if(V.forEach(function(r){return r(t)}),t.interactionId||t.entryType==="first-input"){var e=s[s.length-1],n=g.get(t.interactionId);if(n||s.length<10||t.duration>e.latency){if(n)t.duration>n.latency?(n.entries=[t],n.latency=t.duration):t.duration===n.latency&&t.startTime===n.entries[0].startTime&&n.entries.push(t);else{var i={id:t.interactionId,latency:t.duration,entries:[t]};g.set(i.id,i),s.push(i)}s.sort(function(r,o){return o.latency-r.latency}),s.length>10&&s.splice(10).forEach(function(r){return g.delete(r.id)})}}},j=function(t){var e=self.requestIdleCallback||self.setTimeout,n=-1;return t=P(t),document.visibilityState==="hidden"?t():(n=e(t),E(t)),n},x=[200,500],Z=function(t,e){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(e=e||{},C(function(){var n;Q();var i,r=d("INP"),o=function(c){j(function(){c.forEach(W);var a=U();a&&a.latency!==r.value&&(r.value=a.latency,r.entries=a.entries,i())})},u=m("event",o,{durationThreshold:(n=e.durationThreshold)!==null&&n!==void 0?n:40});i=l(t,r,x,e.reportAllChanges),u&&(u.observe({type:"first-input",buffered:!0}),E(function(){o(u.takeRecords()),i(!0)}),p(function(){N=D(),s.length=0,g.clear(),r=d("INP"),i=l(t,r,x,e.reportAllChanges)}))}))},B=[2500,4e3],S={},$=function(t,e){e=e||{},C(function(){var n,i=H(),r=d("LCP"),o=function(a){e.reportAllChanges||(a=a.slice(-1)),a.forEach(function(f){f.startTime<i.firstHiddenTime&&(r.value=Math.max(f.startTime-T(),0),r.entries=[f],n())})},u=m("largest-contentful-paint",o);if(u){n=l(t,r,B,e.reportAllChanges);var c=P(function(){S[r.id]||(o(u.takeRecords()),u.disconnect(),S[r.id]=!0,n(!0))});["keydown","click"].forEach(function(a){addEventListener(a,function(){return j(c)},{once:!0,capture:!0})}),E(c),p(function(a){r=d("LCP"),n=l(t,r,B,e.reportAllChanges),I(function(){r.value=performance.now()-a.timeStamp,S[r.id]=!0,n(!0)})})}})},R=[800,1800],X=function t(e){document.prerendering?C(function(){return t(e)}):document.readyState!=="complete"?addEventListener("load",function(){return t(e)},!0):setTimeout(e,0)},tt=function(t,e){e=e||{};var n=d("TTFB"),i=l(t,n,R,e.reportAllChanges);X(function(){var r=L();r&&(n.value=Math.max(r.responseStart-T(),0),n.entries=[r],i(!0),p(function(){n=d("TTFB",0),(i=l(t,n,R,e.reportAllChanges))(!0)}))})};export{$ as G,tt as Q,J as S,Z as j,Y as w};
